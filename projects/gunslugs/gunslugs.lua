-- title:  runjumpdie
-- author: Neil Popham
-- desc:
-- script: lua
-- input:  gamepad
-- saveid:

pad={left=2,right=3,up=0,down=1,btn1=4,btn2=5,btn3=6,btn4=7}
screen={width=240,height=136,x2=239,y2=135}
dir={left=1,right=2}
drag={air=0.95,ground=0.65,gravity=0.7}

require "carts/projects/gunslugs/pico8"
require "carts/projects/gunslugs/functions"
require "carts/projects/gunslugs/particles"
require "carts/projects/gunslugs/camera"
require "carts/projects/gunslugs/objects"
require "carts/projects/gunslugs/button"
require "carts/projects/gunslugs/destructables"
require "carts/projects/gunslugs/weapons"
require "carts/projects/gunslugs/enemies"
require "carts/projects/gunslugs/player"
require "carts/projects/gunslugs/bullets"
require "carts/projects/gunslugs/pickups"
require "carts/projects/gunslugs/levels"
require "carts/projects/gunslugs/stages/transition"
require "carts/projects/gunslugs/stages/intro"
require "carts/projects/gunslugs/stages/main"
require "carts/projects/gunslugs/stages/over"

function _init()
 enemies=collection:create()
 particles=collection:create()
 bullets=bullet_collection:create()
 destructables=collection:create()
 pickups=collection:create()
 stage=stage_intro
 draw_stage=stage
 stage:init()
end

function _update60()
 stage:update()
end

function _draw()
 cls()
 draw_stage:draw()
 draw_stage=stage
end

function TIC()
 _draw() _update60()
end

_init()

-- <TILES>
-- 001:777777767666666d7666666d7666666d7666666d7666666d7666666d6ddddddd
-- 002:aaaaaaa9a999999494444444a9999994a9999994aaaaaaa4a999999494444444
-- 003:8e6e882228e822228e6e8822822288222e2e2822822288228e6e882228e82222
-- 004:b6a6bb333b6b3333b6a6bb33b333bb333a3a3b33b333bb33b6a6bb333b6b3333
-- 006:000000001d6d11111d6d11111d6d111101d11110088000000000000000000000
-- 007:000000001d6d11111d6d11111d6d111101d11110000880000000000000000000
-- 008:000000001d6d11111d6d11111d6d111101d11110000008800000000000000000
-- 009:0000111100001111000011110000000000000000000000000000000000000000
-- 010:1110000011100000111000000000000011111110111111101111111000000000
-- 011:0000000000000000000000000000000011111110111111101111111000000000
-- 012:1110111111101111111011110000000000000000000000000000000000000000
-- 013:1110111111101111111011110000000011111110111111101111111000000000
-- 016:1111111104444411014144110444441104124410633333300334433002202220
-- 017:0000000011111111044444110141441104444411641244100443333000002220
-- 018:0000000011111111044444110141441104444411641244100333442002200000
-- 019:1111111111444440114414101144444001442140033336660331133002220220
-- 020:0000000011111111114444401144141011444440014421460331133002220000
-- 021:0000000011111111114444401144141011444440014421460222133000000220
-- 022:1111111114444441141441411444444114211241633333301333333002200220
-- 026:0000000066777766677887767788887777888877677887766677776600000000
-- 027:0000000006677770067788e00678888006788880067788e00667777000000000
-- 028:0000000000d6770000d6e80000d6880000d6880000d6e80000d6770000000000
-- 029:00000000000dd000000dd000000dd000000dd000000dd000000dd00000000000
-- 030:0000000000776d00008e6d0000886d0000886d00008e6d0000776d0000000000
-- 031:00000000077776600e88776008888760088887600e8877600777766000000000
-- 032:a7000000aa000000000000000000000000000000000000000000000000000000
-- 033:ba000000bb000000000000000000000000000000000000000000000000000000
-- 034:0990000099a90000999900000990000000000000000000000000000000000000
-- 035:02220000228e2000288820002282200002220000000000000000000000000000
-- 040:0000000008888880888778888877778888777788888778880888888000000000
-- 041:0000000000288800028878800287778002877780028878800028880000000000
-- 042:0000000000028000002288000028780000287800002288000002800000000000
-- 043:0000000000022000000220000002200000022000000220000002200000000000
-- 044:0000000000082000008822000087820000878200008822000008200000000000
-- 045:0000000000888200088788200877782008777820088788200088820000000000
-- 046:00000000055055005ddddd505ddd6d505ddddd5005ddd500005d500000050000
-- 047:0000000002202200288888202888e82028888820028882000028200000020000
-- 048:0f7fffff0f7fffff0171ffff0f7fffff0f7fffff6dddddd00dd11dd005505550
-- 049:000000000f7fffff0f7fffff0171ffff0f7fffff6f7fffff011dddd000005550
-- 050:000000000f7fffff0f7fffff0171ffff0f7fffff6f7fffff0ddd115005500000
-- 051:f7fffff0f7fffff0f7ff1f10f7fffff0f7fffff00dddd6660dd11dd005550550
-- 052:00000000f7fffff0f7fffff0f7ff1f10f7fffff0f7fffff60dd11dd005550000
-- 053:00000000f7fffff0f7fffff0f7ff1f10f7fffff0f7fffff605551dd000000550
-- 054:ff7fffffff7ffffff1dff11fff7fffffff7fffff65ddddd0d5ddddd005500550
-- 055:000000000001311000111211071121230c111211333111316331113030303030
-- 056:00000000011310001121110032121170112111c0131113330311133603030303
-- 057:000000000001311000111211071121230c111211333111316313111303030303
-- 058:00000000011310001121110032121170112111c0131113333111313630303030
-- 061:0d00000066666666dddddddd1116000055500000555000000000000000000000
-- 062:0000d000000266664444dddd4444206044400600000000000000000000000000
-- 063:0000000066666666dddddddd4444400000000000000000000000000000000000
-- </TILES>

-- <WAVES>
-- 000:112345679abcdefedcba987765432210
-- </WAVES>

-- <SFX>
-- 000:0a0009001800170016002600350035004400530052005200620071007100810081008100910091009000f000f000f000f000f000f000f000f000f00001b000000000
-- </SFX>

-- <PALETTE>
-- 000:0000001d2b537e2553008751ab52365f574fc2c3c7fff1e8ff004dffa300ffec2700e43629adff83769cff77abffccaa
-- </PALETTE>
